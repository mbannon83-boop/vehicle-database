<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vehicle Database - Quick Search & Lookup</title>
    <meta name="description"
        content="Search and manage vehicle records by logbook number, owner name, or registration number with ease.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="index.css">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="logo-section">
                    <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 17H4a2 2 0 01-2-2V5a2 2 0 012-2h16a2 2 0 012 2v10a2 2 0 01-2 2h-1"></path>
                        <polygon points="12 15 17 21 7 21 12 15"></polygon>
                    </svg>
                    <h1>Vehicle Database</h1>
                </div>
                <div class="header-actions">
                    <button class="login-button" id="loginButton" aria-label="Login">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M15 3h4a2 2 0 012 2v14a2 2 0 01-2 2h-4"></path>
                            <polyline points="10 17 15 12 10 7"></polyline>
                            <line x1="15" y1="12" x2="3" y2="12"></line>
                        </svg>
                        <span>Login</span>
                    </button>
                    <button class="profile-button" id="profileButton" style="display: none;" aria-label="Profile">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        <span id="profileUsername">Profile</span>
                    </button>
                    <button class="logout-button" id="logoutButton" style="display: none;" aria-label="Logout">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"></path>
                            <polyline points="16 17 21 12 16 7"></polyline>
                            <line x1="21" y1="12" x2="9" y2="12"></line>
                        </svg>
                        <span>Logout</span>
                    </button>
                    <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                        <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                        <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Description Section -->
            <section class="intro-section">
                <h2>Quick Vehicle Lookup</h2>
                <p>Search for any vehicle in your database instantly. Find detailed information about vehicles and their
                    owners without scrolling through spreadsheets.</p>
            </section>

            <!-- Search Section -->
            <section class="search-section">
                <div class="search-card">
                    <h3>Search Vehicle Records</h3>
                    <p class="search-subtitle">Enter any of the following to find a vehicle</p>

                    <form id="searchForm" class="search-form">
                        <div class="input-group">
                            <label for="logbookNumber">Logbook Number</label>
                            <div class="input-wrapper">
                                <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"></path>
                                    <polyline points="14 2 14 8 20 8"></polyline>
                                </svg>
                                <input type="text" id="logbookNumber" placeholder="e.g., LB12345">
                            </div>
                        </div>

                        <div class="input-group">
                            <label for="ownerName">Owner Name</label>
                            <div class="input-wrapper">
                                <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"></path>
                                    <circle cx="12" cy="7" r="4"></circle>
                                </svg>
                                <input type="text" id="ownerName" placeholder="e.g., John Smith">
                            </div>
                        </div>

                        <div class="input-group">
                            <label for="regoNumber">Registration Number</label>
                            <div class="input-wrapper">
                                <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                    <path d="M7 11V7a5 5 0 0110 0v4"></path>
                                </svg>
                                <input type="text" id="regoNumber" placeholder="e.g., ABC123">
                            </div>
                        </div>

                        <button type="submit" class="search-button" id="searchButton">
                            <svg class="button-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="M21 21l-4.35-4.35"></path>
                            </svg>
                            <span>Search Database</span>
                        </button>
                    </form>
                </div>
            </section>

            <!-- Loading State -->
            <div class="loading-container" id="loadingContainer">
                <div class="loading-spinner"></div>
                <p>Searching database...</p>
            </div>

            <!-- Results Section -->
            <section class="results-section" id="resultsSection">
                <div class="results-header">
                    <h3>Search Results</h3>
                    <span class="results-count" id="resultsCount">0 vehicles found</span>
                </div>
                <div class="results-grid" id="resultsGrid">
                    <!-- Results will be inserted here -->
                </div>
            </section>

            <!-- Empty State -->
            <div class="empty-state" id="emptyState">
                <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="M21 21l-4.35-4.35"></path>
                </svg>
                <h3>No Results Found</h3>
                <p>We couldn't find any vehicles matching your search criteria. Please try different search terms.</p>
            </div>
        </main>

        <!-- Footer -->
        <footer class="app-footer">
            <p>Data automatically synced with Google Sheets via Jotform</p>
        </footer>
    </div>

    <!-- Login Modal -->
    <div class="modal-overlay" id="loginModal">
        <div class="modal-container">
            <div class="modal-header">
                <h3>Admin Login</h3>
                <button class="modal-close" onclick="closeLoginModal()" aria-label="Close">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <form id="loginForm" class="modal-form">
                <div class="input-group">
                    <label for="loginUsername">Username</label>
                    <input type="text" id="loginUsername" required autocomplete="username">
                </div>
                <div class="input-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" required autocomplete="current-password">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeLoginModal()">Cancel</button>
                    <button type="submit" class="btn-primary">Login</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Vehicle Modal -->
    <div class="modal-overlay" id="editModal">
        <div class="modal-container modal-large">
            <div class="modal-header">
                <h3>Edit Vehicle Details</h3>
                <button class="modal-close" onclick="closeEditModal()" aria-label="Close">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <form id="editForm" class="modal-form">
                <input type="hidden" id="editRowIndex">

                <div class="form-section">
                    <h4>Owner Information</h4>
                    <div class="form-grid">
                        <div class="input-group">
                            <label for="editOwnerName">Owner Name *</label>
                            <input type="text" id="editOwnerName" required>
                        </div>
                        <div class="input-group">
                            <label for="editOwnerPhone">Phone</label>
                            <input type="tel" id="editOwnerPhone">
                        </div>
                        <div class="input-group">
                            <label for="editOwnerMembership">Membership Number</label>
                            <input type="text" id="editOwnerMembership">
                        </div>
                        <div class="input-group">
                            <label for="editLogbookNumber">Logbook Number *</label>
                            <input type="text" id="editLogbookNumber" required>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h4>Vehicle Details</h4>
                    <div class="form-grid">
                        <div class="input-group">
                            <label for="editMakeModel">Make & Model *</label>
                            <input type="text" id="editMakeModel" required>
                        </div>
                        <div class="input-group">
                            <label for="editYear">Year</label>
                            <input type="text" id="editYear">
                        </div>
                        <div class="input-group">
                            <label for="editClass">Class</label>
                            <input type="text" id="editClass">
                        </div>
                        <div class="input-group">
                            <label for="editColour">Colour</label>
                            <input type="text" id="editColour">
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h4>Registration</h4>
                    <div class="form-grid">
                        <div class="input-group">
                            <label for="editRegoNumber">Registration Number *</label>
                            <input type="text" id="editRegoNumber" required>
                        </div>
                        <div class="input-group">
                            <label for="editRegoState">State</label>
                            <input type="text" id="editRegoState">
                        </div>
                        <div class="input-group">
                            <label for="editVin">VIN</label>
                            <input type="text" id="editVin">
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h4>Engine Specifications</h4>
                    <div class="form-grid">
                        <div class="input-group">
                            <label for="editEngineNumber">Engine Number</label>
                            <input type="text" id="editEngineNumber">
                        </div>
                        <div class="input-group">
                            <label for="editEngineCylinders">Cylinders</label>
                            <input type="text" id="editEngineCylinders">
                        </div>
                        <div class="input-group">
                            <label for="editEngineCapacity">Capacity (cc)</label>
                            <input type="text" id="editEngineCapacity">
                        </div>
                        <div class="input-group">
                            <label for="editTurbo">Turbo (Y/N)</label>
                            <select id="editTurbo">
                                <option value="">-</option>
                                <option value="Y">Yes</option>
                                <option value="N">No</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeEditModal()">Cancel</button>
                    <button type="submit" class="btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div class="modal-overlay" id="profileModal">
        <div class="modal-container">
            <div class="modal-header">
                <h3>Change Password</h3>
                <button class="modal-close" onclick="closeProfileModal()" aria-label="Close">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <form id="changePasswordForm" class="modal-form">
                <div class="input-group">
                    <label for="currentPassword">Current Password</label>
                    <input type="password" id="currentPassword" required autocomplete="current-password">
                </div>
                <div class="input-group">
                    <label for="newPassword">New Password</label>
                    <input type="password" id="newPassword" required autocomplete="new-password" minlength="6">
                </div>
                <div class="input-group">
                    <label for="confirmPassword">Confirm New Password</label>
                    <input type="password" id="confirmPassword" required autocomplete="new-password" minlength="6">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeProfileModal()">Cancel</button>
                    <button type="submit" class="btn-primary">Change Password</button>
                </div>
            </form>

            <!-- Admin Section -->
            <div id="adminSection" style="display: none;">
                <hr style="margin: var(--spacing-xl) 0; border: none; border-top: 1px solid var(--color-border);">

                <!-- User List -->
                <h4 style="margin-bottom: var(--spacing-md); color: var(--color-text-primary);">Manage Users</h4>
                <div id="userListContainer" style="margin-bottom: var(--spacing-xl);">
                    <div id="userList"
                        style="max-height: 200px; overflow-y: auto; border: 1px solid var(--color-border); border-radius: var(--radius-md); padding: var(--spacing-sm);">
                    </div>
                </div>

                <!-- Add User Form -->
                <h4 style="margin-bottom: var(--spacing-md); color: var(--color-text-primary);">Add New User</h4>
                <form id="addUserForm" class="modal-form">
                    <div class="input-group">
                        <label for="newUsername">New Username</label>
                        <input type="text" id="newUsername" required>
                    </div>
                    <p style="font-size: 0.875rem; color: var(--color-text-secondary); margin-top: var(--spacing-sm);">
                        Default password will be: <strong>ChangeMe123</strong>
                    </p>
                    <div class="modal-actions">
                        <button type="submit" class="btn-primary">Add User</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>